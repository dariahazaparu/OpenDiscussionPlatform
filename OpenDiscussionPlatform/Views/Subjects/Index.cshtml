@{
    ViewBag.Title = "Recipes";
}

<hr style="border:2px #d4a5a5 solid;" />
<div class="text-center" style="height:70vh; background-color:#e5c6c6; padding-top:30vh;">
    <h1><large><strong>@ViewBag.Category.CategoryName</strong></large></h1>
</div>
<hr style="border:2px #d4a5a5 solid;" />

@if (ViewBag.Message != null)
{
    <div class="text-center">
        <h3>@ViewBag.Message</h3>
    </div>
    <hr style="border:2px #d4a5a5 solid;" />
}
<div class="text-center">
    <div class="container">
        <div class="row">
            <div class="col-sm-3">
                <a href="/Categories/Index" class="btn btn-lg"><span class="glyphicon glyphicon-hand-left"> Back to countries</span></a>
            </div>
            <div class="col-sm-5"></div>
            @if (ViewBag.esteUser)
            {
                <div class="col-sm-4">
                    <a href="/Subjects/New/@ViewBag.Category.CategoryId" class="btn btn-lg"><span class="glyphicon glyphicon-plus-sign" /> Add new recipe</a>
                </div>
            }
        </div>
    </div>
</div>

@foreach (var subject in ViewBag.Subjects)
{
    <div class="container">
        <div class="row">
            <h2><strong><span class="glyphicon glyphicon-chevron-right"></span> @subject.Title</strong></h2>
            <div class="col-sm-10" style="color:#14274e;">
                <blockquote style="border-left: 2px solid #595b83;">
                    <h5>@Html.Raw(subject.Content)</h5>
                    <footer>
                        <sm>@subject.Date</sm>
                        <br />
                        <sm>by @subject.User.UserName</sm>
                    </footer>
                </blockquote>
            </div>
            <div class="col-sm-2" style="color:#14274e;">
                <button class="button" style="background-color:#9542e0; width:60px; font-size:20px;">
                    <a href="/Subjects/Show/@subject.SubjectId" style="color:#ffc1c1;">
                        <span class="glyphicon glyphicon-comment"></span>
                    </a>
                </button>
                <br />
                @if (subject.UserId == ViewBag.utilizatorCurent || ViewBag.esteModerator)
                {
                    <button class="button" style="background-color:#f4abc4; width:60px; font-size:20px;">
                        <a href="/Subjects/Edit/@subject.SubjectId">
                            <span class="glyphicon glyphicon-edit"></span>
                        </a>
                    </button>
                    <br />
                    <form method="post" action="/Subjects/Delete/@subject.SubjectId">
                        @Html.HttpMethodOverride(HttpVerbs.Delete)
                        <button type="submit" class="button" style="background-color:#af2d2d; width:60px; font-size:20px;">
                            <span class="glyphicon glyphicon-trash"></span>
                        </button>
                    </form>
                }
            </div>

            <br />
            <hr />
        </div>
    </div>
}
<br />
<br />

<div style="text-align:center;">
    <nav aria-label="Page navigation">
        <ul class="costum">
            <li>
                <a href="/Subjects/Index/@ViewBag.Category.CategoryId?page=1" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>

            @for (int i = 1; i <= ViewBag.lastPage; i++)
            {
                if (ViewBag.currPage.Equals(i))
                    {
                        <li style="color: #23527c; background-color: #eee;"><a href="/Subjects/Index/@ViewBag.Category.CategoryId?page=@i">@(i)</a></li>
                    }
                    else
                    {
                        <li><a href="/Subjects/Index/@ViewBag.Category.CategoryId?page=@i">@(i)</a></li>
                    }
            }

            <li>
                <a href="/Subjects/Index/@ViewBag.Category.CategoryId?page=@(ViewBag.lastPage)" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</div>

<br />

